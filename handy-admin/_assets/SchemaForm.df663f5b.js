import{y as e,z as a,s as t,a as n,m as o,A as r,q as l,T as s,C as u,S as i,P as c,f as m,g as p,v as d,p as f,h as v,r as g,o as y,c as h,B as b,d as O,D as k,F as j,b as I,t as w,E as V,i as x,G as F,H as C,J as _,K as S,L as R,N as U,O as P,Q as L,R as z,U as A,V as E,W as T,X as $,n as q,Y as K,Z as G,_ as D,$ as N,a0 as M,a1 as J,a2 as Q,x as B,w as H,a3 as W,a4 as X,a5 as Y,a6 as Z,a7 as ee,a8 as ae,a9 as te,aa as ne,e as oe}from"./index.fb302126.js";function re(t,n){null!=t&&e(t)?t.value=n:null!=t&&a(t)&&(t.loading=n)}const le=async(e,a)=>(re(a,!0),await e.finally((()=>re(a,!1))));const se=(e,a,t)=>{let l=null;const s=document.createElement("div"),u=()=>{r(null,s),l=null,s.remove()};return l=n(e),l.props=o(l.props,{remove:u,...a}),r(l,s),l.component.ctx.remove=u,console.log(e,"组件"),console.log(l,"组件_instance"),l.component.ctx.$updateProps=function(e){e&&Object.keys(e).forEach((a=>{l.component.props[a]=e[a]}))},l.component.ctx};var ue=l({name:"basic-table",props:{columns:{type:Object},getListFunc:{type:Function},rowSelection:{type:Object},rowKey:{type:[String,Number]},pageOption:{type:Object}},components:{[s.name]:s,[u.name]:u,[i.name]:i,[c.name]:c,[i.Option.name]:i.Option},setup(e,{attrs:a,slots:n}){const{pageOption:o}=function(e){const a=t({current:1,pageSize:10,total:0,pageSizeOptions:["10","20","30","40","50"],showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条`,onChange:(a,t)=>e?.pageChange&&e.pageChange(a,t),onShowSizeChange:(a,t)=>e?.pageChange&&e.pageChange(a,t),...e});return{pageOption:a,updatePageOption:(e={})=>{Object.assign(a.value,e),console.log(a.value,"更新分页配置")}}}(),r=m({data:[],pageOption:Object.assign(o,e.pageOption),actions:e.columns.find((e=>"action"==(e.dataIndex||e.key)))?.actions||[],tableLoading:!1}),l=async(a={page:r.pageOption.current,limit:r.pageOption.pageSize,...e.pageOption})=>{r.tableLoading=!0;const t=await e.getListFunc(a).finally((()=>r.tableLoading=!1)),{records:n,pages:o,size:l,total:s}=t.result;console.log(n),Object.assign(r.pageOption,{current:o,size:l,total:s}),r.data=n};p((async()=>{l()}));return{...d(r),buttonProps:{size:"small"},actionEvent:(a,t)=>t({record:a,props:e},l),refreshTableData:l,paginationChange:a=>{console.log(a),r.pageOption={...r.pageOption,...a},l({limit:a.pageSize,pageNumber:a.current,...e.pageOption})}}}});const ie=x("data-v-2b4aeb66");f("data-v-2b4aeb66");const ce=I("详情"),me=I(" 您确定要删除吗？ ");v();const pe=ie((function(e,a,t,r,l,s){const u=g("router-link"),i=g("Option"),c=g("a-select"),m=g("a-button"),p=g("a-popconfirm"),d=g("a-table");return y(),h(d,o(e.$props,{columns:e.columns,loading:e.tableLoading,rowSelection:e.rowSelection,rowKey:e.rowKey,size:"middle","data-source":e.data,pagination:e.pageOption,onChange:e.paginationChange}),b({_:2},[O(e.$slots,((a,t)=>({name:t,fn:ie((a=>[k(e.$slots,t,a)]))}))),O(e.columns.filter((e=>e.slots)),(a=>({name:a.slots.customRender,fn:ie((t=>[e.$slots[a.slots.customRender]?k(e.$slots,a.slots.customRender,o({key:0},t)):(y(),h(j,{key:1},["action"!==a.slots.customRender?(y(),h("div",{key:a.slots.customRender},["format"==a.slotsType?(y(),h(j,{key:0},[I(w(a.slotsFunc(t.record[a.dataIndex||a.key],t.record)),1)],64)):V("",!0),"link"==a.slotsType?(y(),h(u,{key:1,to:a.linkPath+t.record[a.linkId]},{default:ie((()=>[I(w(t.text),1)])),_:2},1032,["to"])):V("",!0)])):V("",!0),"action"==a.slots.customRender?(y(),h("div",{key:a.slots.customRender,class:"actions"},[(y(!0),h(j,null,O(e.actions,((a,r)=>(y(),h(j,null,["select"==a.type?(y(),h(c,{value:t.record[a.key],"onUpdate:value":e=>t.record[a.key]=e,key:r,size:"small"},{default:ie((()=>[(y(!0),h(j,null,O(a.options,(e=>(y(),h(i,{value:e.value,key:e.value},{default:ie((()=>[I(w(e.label),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["value","onUpdate:value"])):V("",!0),"button"==a.type?(y(),h(m,o({key:1},{...e.buttonProps,...a.props},{onClick:n=>e.actionEvent(t.record,a.func),key:r}),{default:ie((()=>[I(w(a.text),1)])),_:2},1040,["onClick"])):V("",!0),"link"==a.type?(y(),h(u,{to:"/",key:r,onClick:a=>e.saveChange(t.record)},{default:ie((()=>[ce])),_:2},1032,["onClick"])):V("",!0),"popconfirm"==a.type?(y(),h(p,{key:r,placement:"leftTop",onConfirm:n=>e.actionEvent(t.record,a.func)},{title:ie((()=>[me])),default:ie((()=>[n(m,{...e.buttonProps,...a.props},{default:ie((()=>[I(w(a.text),1)])),_:2},1040)])),_:2},1032,["onConfirm"])):V("",!0)],64)))),256))])):V("",!0)],64))]))})))]),1040,["columns","loading","rowSelection","rowKey","data-source","pagination","onChange"])}));ue.render=pe,ue.__scopeId="data-v-2b4aeb66";const de=e=>F.post("/sysUser/getUserPage",e),fe=e=>F.post("/sysUser/saveUser",e),ve=e=>F.post("/sysUser/updateUser",e),ge=e=>F.post("/sysUser/deleteUser",e),ye=e=>F.post("/sysUser/deleteUsers",e),he=e=>F.post("/sysRole/deleteRole",e),be=e=>F.post("/sysRole/getRolePage",e),Oe=e=>F.post("/sysRole/saveRole",e),ke=e=>F.post("/sysRole/updateRole",e),je=()=>F.get("/sys/role_access"),Ie=e=>F.get("/sys/access/"+e);var we=Math.min;function Ve(e){return L(e)?e:[]}var xe=z((function(e){var a=C(e,Ve);return a.length&&a[0]===e[0]?function(e,a,t){for(var n=t?U:P,o=e[0].length,r=e.length,l=r,s=Array(r),u=1/0,i=[];l--;){var c=e[l];l&&a&&(c=C(c,_(a))),u=we(c.length,u),s[l]=!t&&(a||o>=120&&c.length>=120)?new S(l&&c):void 0}c=e[0];var m=-1,p=s[0];e:for(;++m<o&&i.length<u;){var d=c[m],f=a?a(d):d;if(d=t||0!==d?d:0,!(p?R(p,f):n(i,f,t))){for(l=r;--l;){var v=s[l];if(!(v?R(v,f):n(e[l],f,t)))continue e}p&&p.push(f),i.push(d)}}return i}(a):[]}));function Fe(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?Object(arguments[a]):{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(a){Ce(e,a,t[a])}))}return e}function Ce(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function _e(){return(_e=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function Se(e){var a=!1;return e&&e.length&&e.every((function(e){return!e.required||(a=!0,!1)})),a}function Re(e){return null==e?[]:Array.isArray(e)?e:[e]}function Ue(e,a,t){for(var n=e,o=(a=(a=a.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),r=0,l=o.length;r<l-1&&(n||t);++r){var s=o[r];if(!(s in n)){if(t)throw new Error("please transfer a valid name path to validate!");break}n=n[s]}return{o:n,k:o[r],v:n?n[o[r]]:null,isValid:n&&o[r]in n}}function Pe(e,a,t){var n=A(e),o={};Object.keys(a).forEach((function(e){o[e]={autoLink:!1,required:Se(a[e])}})),o=m(o);var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;return a.length?e.filter((function(e){var t=Re(e.trigger||"change");return xe(t,a).length})):e},l=null,s=function(e,a,t,n){var r=T([e],a,t,Fe({validateMessages:$},n),!!n.validateFirst);return o[e].validateStatus="validating",r.catch((function(e){return e})).then((function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"validating"===o[e].validateStatus&&(o[e].validateStatus=a.length?"error":"success",o[e].help=a[0])})),r},u=function(t,n){var o=[],u=!0;t?o=Array.isArray(t)?t:[t]:(u=!1,o=Object.keys(a));var i=function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,u=[],i={},c=function(l){var c=t[l],m=Ue(e,c,o);if(!m.isValid)return"continue";i[c]=m.v;var p=r(a[c],Re(n&&n.trigger));p.length&&u.push(s(c,m.v,p,n||{}).then((function(){return{name:c,errors:[]}})).catch((function(e){return Promise.reject({name:c,errors:e})})))},m=0;m<t.length;m++)c(m);var p=D(u);l=p;var d=p.then((function(){return l===p?Promise.resolve(i):Promise.reject([])})).catch((function(e){var a=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:i,errorFields:a,outOfDate:l!==p})}));return d.catch((function(e){return e})),d}(o,n||{},u);return i.catch((function(e){return e})),i},i=n,c=function(e){var t=[];Object.keys(a).forEach((function(a){var n=Ue(e,a,!1),o=Ue(i,a,!1);N(n.v,o.v)||t.push(a)})),u(t,{trigger:"change"}),i=A(e)},p=null==t?void 0:t.debounce;return q(e,p&&p.wait?K(c,p.wait,G(p,["wait"])):c,{immediate:t&&!!t.immediate,deep:!0}),q(a,(function(){t&&t.validateOnRuleChange&&u()}),{deep:!0}),{modelRef:e,rulesRef:a,initialModel:n,validateInfos:o,resetFields:function(t){_e(e,Fe({},A(n),t)),E((function(){Object.keys(o).forEach((function(e){o[e]={autoLink:!1,required:Se(a[e])}}))}))},validate:u,validateField:s,mergeValidateInfo:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],a={autoLink:!1},t=[],n=Array.isArray(e)?e:[e],o=0;o<n.length;o++){var r=n[o];"error"===(null==r?void 0:r.validateStatus)&&(a.validateStatus="error",r.help&&t.push(r.help)),a.required=a.required||(null==r?void 0:r.required)}return a.help=t.join("\n"),a}}}const Le=Object.prototype.toString;function ze(e){return function(e,a){return Le.call(e)===`[object ${a}]`}(e,"String")}const Ae=e=>"function"==typeof e;var Ee=l({name:"schema-form-checkbox",emits:["update:value"],components:{[M.name]:M,[J.name]:J,[Q.name]:Q,[M.Group.name]:M.Group},props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:a,emit:t})=>({modelValue:B({get:()=>e.value,set:e=>t("update:value",e)})})});Ee.render=function(e,a,t,r,l,s){const u=g("a-checkbox"),i=g("a-col"),c=g("a-row"),m=g("a-checkbox-group");return y(),h(m,o({value:e.modelValue,"onUpdate:value":a[1]||(a[1]=a=>e.modelValue=a)},W(e.formItem.eventObject),{style:{width:"100%"}}),{default:H((()=>[n(c,null,{default:H((()=>[(y(!0),h(j,null,O(e.formItem.options,(e=>(y(),h(i,{key:e.value,span:8},{default:H((()=>[n(u,{value:e.value},{default:H((()=>[I(w(e.label),1)])),_:2},1032,["value"])])),_:2},1024)))),128))])),_:1})])),_:1},16,["value"])};var Te=l({name:"schema-form-input-number",emits:["update:value"],components:{[X.name]:X},props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:a,emit:t})=>({modelValue:B({get:()=>e.value,set:e=>t("update:value",e)})})});Te.render=function(e,a,t,n,r,l){const s=g("a-input-number");return y(),h(s,o({value:e.modelValue,"onUpdate:value":a[1]||(a[1]=a=>e.modelValue=a)},e.formItem.props,W(e.formItem.eventObject)),null,16,["value"])};var $e=l({name:"schema-form-input",emits:["update:value"],components:{[Y.name]:Y},props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:a,emit:t})=>({modelValue:B({get:()=>e.value,set:e=>t("update:value",e)})})});$e.render=function(e,a,t,n,r,l){const s=g("a-input");return y(),h(s,o({value:e.modelValue,"onUpdate:value":a[1]||(a[1]=a=>e.modelValue=a)},e.formItem.props,W(e.formItem.eventObject),{autocomplete:"new-password"}),null,16,["value"])};var qe=l({name:"schema-form-radio",emits:["update:value"],components:{[Z.name]:Z,[Z.Group.name]:Z.Group},props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:a,emit:t})=>({modelValue:B({get:()=>e.value,set:e=>t("update:value",e)})})});qe.render=function(e,a,t,n,r,l){const s=g("a-radio"),u=g("a-radio-group");return y(),h(u,o({value:e.modelValue,"onUpdate:value":a[1]||(a[1]=a=>e.modelValue=a)},W(e.formItem.eventObject)),{default:H((()=>[(y(!0),h(j,null,O(e.formItem.options,(e=>(y(),h(s,{key:e.value,value:e.value},{default:H((()=>[I(w(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},16,["value"])};var Ke=l({name:"schema-form-select",emits:["update:value"],components:{[i.name]:i,[i.Option.name]:i.Option},props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:a,emit:t})=>({modelValue:B({get:()=>e.value,set:e=>t("update:value",e)})})});Ke.render=function(e,a,t,n,r,l){const s=g("Option"),u=g("a-select");return y(),h(u,o({value:e.modelValue,"onUpdate:value":a[1]||(a[1]=a=>e.modelValue=a)},W(e.formItem.eventObject),e.formItem.props),{default:H((()=>[(y(!0),h(j,null,O(e.formItem.options,(e=>(y(),h(s,{key:e.value,value:e.value},{default:H((()=>[I(w(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},16,["value"])};var Ge=l({name:"schema-form-textarea",emits:["update:value"],components:{[Y.TextArea.name]:Y.TextArea},props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:a,emit:t})=>({modelValue:B({get:()=>e.value,set:e=>t("update:value",e)})})});Ge.render=function(e,a,t,n,r,l){const s=g("a-switch");return y(),h(s,o({checked:e.modelValue,"onUpdate:checked":a[1]||(a[1]=a=>e.modelValue=a)},W(e.formItem.eventObject),e.formItem.props),null,16,["checked"])};var De=l({name:"schema-form-textarea",emits:["update:value"],components:{[Y.TextArea.name]:Y.TextArea},props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:a,emit:t})=>({modelValue:B({get:()=>e.value,set:e=>t("update:value",e)})})});De.render=function(e,a,t,n,r,l){const s=g("a-textarea");return y(),h(s,o({value:e.modelValue,"onUpdate:value":a[1]||(a[1]=a=>e.modelValue=a)},W(e.formItem.eventObject),e.formItem.props),null,16,["value"])};var Ne=l({name:"dynamic-form",components:{schemaFormCheckbox:Ee,schemaFormInputNumber:Te,schemaFormInput:$e,schemaFormRadio:qe,schemaFormSelect:Ke,schemaFormSwitch:Ge,schemaFormTextarea:De,[ee.name]:ee,[ae.name]:ae,[ae.Item.name]:ae.Item},props:{dynamicValidateForm:{required:!0,type:[Object]},fields:{type:Object,default:()=>({})}},setup(t,n){const o=te(),r=m(t.dynamicValidateForm.formItem.reduce(((e,a)=>(a.eventObject??(a.eventObject={}),e[a.field]=a.value,e)),{}));t.fields&&Object.assign(r,t.fields),t.dynamicValidateForm.formItem.forEach((async e=>{console.log("~~~~~~~~~~",e.asyncOptions),e?.hasOwnProperty("loading")&&(e.loading=!0),Ae(e.asyncOptions)?e.options=await e.asyncOptions(e,o).finally((()=>e.loading=!1)):Ae(e.asyncValue)&&(r[e.field]=await e.asyncValue(e,o).finally((()=>e.loading=!1)))}));const l=m(t.dynamicValidateForm.formItem.reduce(((e,a)=>(a.rules&&(e[a.field]=a.rules),e)),{})),s=t.dynamicValidateForm.watchCallback??(()=>({}));t.dynamicValidateForm.watchKeys&&q(t.dynamicValidateForm.watchKeys.map((e=>()=>r[e])),((e,a)=>s(e,{dynamicForm:t.dynamicValidateForm,modelRef:r})));const{resetFields:u,validate:i,validateInfos:c}=Pe(r,l),p=["input","textarea","select","radio","checkbox","input-number","input-range","switch"];return{formItemLayout:{labelCol:{span:4},wrapperCol:{span:20}},validate:i,isString:ze,getComponent:t=>p.includes(t)?"schema-form-"+t:a(t)||e(t)?ne(t):t,validateInfos:c,modelRef:r}}});const Me=x("data-v-3abf4a71"),Je=Me((function(e,a,t,r,l,s){const u=g("a-spin"),i=g("a-form-item"),c=g("a-form");return y(),h(c,e.dynamicValidateForm.formItemLayout||e.formItemLayout,{default:Me((()=>[(y(!0),h(j,null,O(e.dynamicValidateForm.formItem.filter((e=>!e.hidden)),((a,t)=>(y(),h(i,o({key:a.field,help:a.help,extra:a.extra},e.validateInfos[a.field],{label:a.label}),{default:Me((()=>[n(u,{spinning:a.loading||!1},{default:Me((()=>[(y(),h(oe(e.getComponent(a.type)),{value:e.modelRef[a.field],"onUpdate:value":t=>e.modelRef[a.field]=t,"form-item":a},null,8,["value","onUpdate:value","form-item"]))])),_:2},1032,["spinning"])])),_:2},1040,["help","extra","label"])))),128))])),_:1},16)}));Ne.render=Je,Ne.__scopeId="data-v-3abf4a71";export{ve as a,se as b,fe as c,ge as d,ue as e,de as f,be as g,ye as h,je as i,Ie as j,ke as k,he as l,Oe as m,Ne as s,le as u};
