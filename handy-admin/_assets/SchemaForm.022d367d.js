import{a as e,m as t,I as a,y as n,z as o,s as r,A as l,q as s,T as u,C as i,S as c,P as m,f as p,g as d,v as f,p as v,h as g,r as y,o as h,c as b,B as O,d as j,D as k,F as w,b as I,t as V,E as C,i as x,G as F,H as S,J as R,K as _,L as P,N as U,O as z,Q as A,R as E,U as L,V as T,W as $,X as q,n as K,Y as M,Z as D,_ as G,$ as N,a0 as Q,a1 as B,a2 as J,x as H,w as W,a3 as X,a4 as Y,a5 as Z,a6 as ee,a7 as te,a8 as ae,a9 as ne,aa as oe,e as re}from"./index.a841be5a.js";var le={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm0 820c-205.4 0-372-166.6-372-372s166.6-372 372-372 372 166.6 372 372-166.6 372-372 372z"}},{tag:"path",attrs:{d:"M623.6 316.7C593.6 290.4 554 276 512 276s-81.6 14.5-111.6 40.7C369.2 344 352 380.7 352 420v7.6c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8V420c0-44.1 43.1-80 96-80s96 35.9 96 80c0 31.1-22 59.6-56.1 72.7-21.2 8.1-39.2 22.3-52.1 40.9-13.1 19-19.9 41.8-19.9 64.9V620c0 4.4 3.6 8 8 8h48c4.4 0 8-3.6 8-8v-22.7a48.3 48.3 0 0130.9-44.8c59-22.7 97.1-74.7 97.1-132.5.1-39.3-17.1-76-48.3-103.3zM472 732a40 40 0 1080 0 40 40 0 10-80 0z"}}]},name:"question-circle",theme:"outlined"};function se(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var ue=function(n,o){var r=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){se(e,t,a[t])}))}return e}({},n,o.attrs);return e(a,t(r,{icon:le}),null)};function ie(e,t){null!=e&&n(e)?e.value=t:null!=e&&o(e)&&(e.loading=t)}ue.displayName="QuestionCircleOutlined",ue.inheritAttrs=!1;const ce=async(e,t)=>(ie(t,!0),await e.finally((()=>ie(t,!1))));const me=(a,n,o)=>{let r=null;const s=document.createElement("div"),u=()=>{l(null,s),r=null,s.remove()};return r=e(a),r.props=t(r.props,{remove:u,...n}),l(r,s),r.component.ctx.remove=u,console.log(a,"组件"),console.log(r,"组件_instance"),r.component.ctx.$updateProps=function(e){e&&Object.keys(e).forEach((t=>{r.component.props[t]=e[t]}))},r.component.ctx};var pe=s({name:"basic-table",props:{columns:{type:Object},getListFunc:{type:Function},rowSelection:{type:Object},rowKey:{type:[String,Number]},pageOption:{type:Object}},components:{[u.name]:u,[i.name]:i,[c.name]:c,[m.name]:m,[c.Option.name]:c.Option},setup(e,{attrs:t,slots:a}){const{pageOption:n}=function(e){const t=r({current:1,pageSize:10,total:0,pageSizeOptions:["10","20","30","40","50"],showQuickJumper:!0,showSizeChanger:!0,showTotal:e=>`共 ${e} 条`,onChange:(t,a)=>e?.pageChange&&e.pageChange(t,a),onShowSizeChange:(t,a)=>e?.pageChange&&e.pageChange(t,a),...e});return{pageOption:t,updatePageOption:(e={})=>{Object.assign(t.value,e),console.log(t.value,"更新分页配置")}}}(),o=p({data:[],pageOption:Object.assign(n,e.pageOption),actions:e.columns.find((e=>"action"==(e.dataIndex||e.key)))?.actions||[],tableLoading:!1}),l=async(t={page:o.pageOption.current,limit:o.pageOption.pageSize,...e.pageOption})=>{o.tableLoading=!0;const a=await e.getListFunc(t).finally((()=>o.tableLoading=!1)),{records:n,pages:r,size:l,total:s}=a.result;console.log(n),Object.assign(o.pageOption,{current:r,size:l,total:s}),o.data=n};d((async()=>{l()}));return{...f(o),buttonProps:{size:"small"},actionEvent:(t,a)=>a({record:t,props:e},l),refreshTableData:l,paginationChange:t=>{console.log(t),o.pageOption={...o.pageOption,...t},l({limit:t.pageSize,pageNumber:t.current,...e.pageOption})}}}});const de=x("data-v-2b4aeb66");v("data-v-2b4aeb66");const fe=I("详情"),ve=I(" 您确定要删除吗？ ");g();const ge=de((function(a,n,o,r,l,s){const u=y("router-link"),i=y("Option"),c=y("a-select"),m=y("a-button"),p=y("a-popconfirm"),d=y("a-table");return h(),b(d,t(a.$props,{columns:a.columns,loading:a.tableLoading,rowSelection:a.rowSelection,rowKey:a.rowKey,size:"middle","data-source":a.data,pagination:a.pageOption,onChange:a.paginationChange}),O({_:2},[j(a.$slots,((e,t)=>({name:t,fn:de((e=>[k(a.$slots,t,e)]))}))),j(a.columns.filter((e=>e.slots)),(n=>({name:n.slots.customRender,fn:de((o=>[a.$slots[n.slots.customRender]?k(a.$slots,n.slots.customRender,t({key:0},o)):(h(),b(w,{key:1},["action"!==n.slots.customRender?(h(),b("div",{key:n.slots.customRender},["format"==n.slotsType?(h(),b(w,{key:0},[I(V(n.slotsFunc(o.record[n.dataIndex||n.key],o.record)),1)],64)):C("",!0),"link"==n.slotsType?(h(),b(u,{key:1,to:n.linkPath+o.record[n.linkId]},{default:de((()=>[I(V(o.text),1)])),_:2},1032,["to"])):C("",!0)])):C("",!0),"action"==n.slots.customRender?(h(),b("div",{key:n.slots.customRender,class:"actions"},[(h(!0),b(w,null,j(a.actions,((n,r)=>(h(),b(w,null,["select"==n.type?(h(),b(c,{value:o.record[n.key],"onUpdate:value":e=>o.record[n.key]=e,key:r,size:"small"},{default:de((()=>[(h(!0),b(w,null,j(n.options,(e=>(h(),b(i,{value:e.value,key:e.value},{default:de((()=>[I(V(e.label),1)])),_:2},1032,["value"])))),128))])),_:2},1032,["value","onUpdate:value"])):C("",!0),"button"==n.type?(h(),b(m,t({key:1},{...a.buttonProps,...n.props},{onClick:e=>a.actionEvent(o.record,n.func),key:r}),{default:de((()=>[I(V(n.text),1)])),_:2},1040,["onClick"])):C("",!0),"link"==n.type?(h(),b(u,{to:"/",key:r,onClick:e=>a.saveChange(o.record)},{default:de((()=>[fe])),_:2},1032,["onClick"])):C("",!0),"popconfirm"==n.type?(h(),b(p,{key:r,placement:"leftTop",onConfirm:e=>a.actionEvent(o.record,n.func)},{title:de((()=>[ve])),default:de((()=>[e(m,{...a.buttonProps,...n.props},{default:de((()=>[I(V(n.text),1)])),_:2},1040)])),_:2},1032,["onConfirm"])):C("",!0)],64)))),256))])):C("",!0)],64))]))})))]),1040,["columns","loading","rowSelection","rowKey","data-source","pagination","onChange"])}));pe.render=ge,pe.__scopeId="data-v-2b4aeb66";const ye=e=>F.post("/sysUser/getUserPage",e),he=e=>F.post("/sysUser/saveUser",e),be=e=>F.post("/sysUser/updateUser",e),Oe=e=>F.post("/sysUser/deleteUser",e),je=e=>F.post("/sysUser/deleteUsers",e),ke=e=>F.post("/sysRole/deleteRole",e),we=e=>F.post("/sysRole/deleteRoles",e),Ie=e=>F.post("/sysRole/getRolePage",e),Ve=e=>F.post("/sysRole/saveRole",e),Ce=e=>F.post("/sysRole/updateRole",e),xe=()=>F.get("/sys/role_access"),Fe=e=>F.get("/sys/access/"+e);var Se=Math.min;function Re(e){return A(e)?e:[]}var _e=E((function(e){var t=S(e,Re);return t.length&&t[0]===e[0]?function(e,t,a){for(var n=a?U:z,o=e[0].length,r=e.length,l=r,s=Array(r),u=1/0,i=[];l--;){var c=e[l];l&&t&&(c=S(c,R(t))),u=Se(c.length,u),s[l]=!a&&(t||o>=120&&c.length>=120)?new _(l&&c):void 0}c=e[0];var m=-1,p=s[0];e:for(;++m<o&&i.length<u;){var d=c[m],f=t?t(d):d;if(d=a||0!==d?d:0,!(p?P(p,f):n(i,f,a))){for(l=r;--l;){var v=s[l];if(!(v?P(v,f):n(e[l],f,a)))continue e}p&&p.push(f),i.push(d)}}return i}(t):[]}));function Pe(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?Object(arguments[t]):{},n=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),n.forEach((function(t){Ue(e,t,a[t])}))}return e}function Ue(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function ze(){return(ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}function Ae(e){var t=!1;return e&&e.length&&e.every((function(e){return!e.required||(t=!0,!1)})),t}function Ee(e){return null==e?[]:Array.isArray(e)?e:[e]}function Le(e,t,a){for(var n=e,o=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split("."),r=0,l=o.length;r<l-1&&(n||a);++r){var s=o[r];if(!(s in n)){if(a)throw new Error("please transfer a valid name path to validate!");break}n=n[s]}return{o:n,k:o[r],v:n?n[o[r]]:null,isValid:n&&o[r]in n}}function Te(e,t,a){var n=L(e),o={};Object.keys(t).forEach((function(e){o[e]={autoLink:!1,required:Ae(t[e])}})),o=p(o);var r=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t.length?e.filter((function(e){var a=Ee(e.trigger||"change");return _e(a,t).length})):e},l=null,s=function(e,t,a,n){var r=$([e],t,a,Pe({validateMessages:q},n),!!n.validateFirst);return o[e].validateStatus="validating",r.catch((function(e){return e})).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"validating"===o[e].validateStatus&&(o[e].validateStatus=t.length?"error":"success",o[e].help=t[0])})),r},u=function(a,n){var o=[],u=!0;a?o=Array.isArray(a)?a:[a]:(u=!1,o=Object.keys(t));var i=function(a){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,u=[],i={},c=function(l){var c=a[l],m=Le(e,c,o);if(!m.isValid)return"continue";i[c]=m.v;var p=r(t[c],Ee(n&&n.trigger));p.length&&u.push(s(c,m.v,p,n||{}).then((function(){return{name:c,errors:[]}})).catch((function(e){return Promise.reject({name:c,errors:e})})))},m=0;m<a.length;m++)c(m);var p=G(u);l=p;var d=p.then((function(){return l===p?Promise.resolve(i):Promise.reject([])})).catch((function(e){var t=e.filter((function(e){return e&&e.errors.length}));return Promise.reject({values:i,errorFields:t,outOfDate:l!==p})}));return d.catch((function(e){return e})),d}(o,n||{},u);return i.catch((function(e){return e})),i},i=n,c=function(e){var a=[];Object.keys(t).forEach((function(t){var n=Le(e,t,!1),o=Le(i,t,!1);N(n.v,o.v)||a.push(t)})),u(a,{trigger:"change"}),i=L(e)},m=null==a?void 0:a.debounce;return K(e,m&&m.wait?M(c,m.wait,D(m,["wait"])):c,{immediate:a&&!!a.immediate,deep:!0}),K(t,(function(){a&&a.validateOnRuleChange&&u()}),{deep:!0}),{modelRef:e,rulesRef:t,initialModel:n,validateInfos:o,resetFields:function(a){ze(e,Pe({},L(n),a)),T((function(){Object.keys(o).forEach((function(e){o[e]={autoLink:!1,required:Ae(t[e])}}))}))},validate:u,validateField:s,mergeValidateInfo:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t={autoLink:!1},a=[],n=Array.isArray(e)?e:[e],o=0;o<n.length;o++){var r=n[o];"error"===(null==r?void 0:r.validateStatus)&&(t.validateStatus="error",r.help&&a.push(r.help)),t.required=t.required||(null==r?void 0:r.required)}return t.help=a.join("\n"),t}}}const $e=Object.prototype.toString;function qe(e){return function(e,t){return $e.call(e)===`[object ${t}]`}(e,"String")}const Ke=e=>"function"==typeof e;var Me=s({name:"schema-form-checkbox",emits:["update:value"],components:{[Q.name]:Q,[B.name]:B,[J.name]:J,[Q.Group.name]:Q.Group},props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:t,emit:a})=>({modelValue:H({get:()=>e.value,set:e=>a("update:value",e)})})});Me.render=function(a,n,o,r,l,s){const u=y("a-checkbox"),i=y("a-col"),c=y("a-row"),m=y("a-checkbox-group");return h(),b(m,t({value:a.modelValue,"onUpdate:value":n[1]||(n[1]=e=>a.modelValue=e)},X(a.formItem.eventObject),{style:{width:"100%"}}),{default:W((()=>[e(c,null,{default:W((()=>[(h(!0),b(w,null,j(a.formItem.options,(t=>(h(),b(i,{key:t.value,span:8},{default:W((()=>[e(u,{value:t.value},{default:W((()=>[I(V(t.label),1)])),_:2},1032,["value"])])),_:2},1024)))),128))])),_:1})])),_:1},16,["value"])};var De=s({name:"schema-form-input-number",emits:["update:value"],components:{[Y.name]:Y},props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:t,emit:a})=>({modelValue:H({get:()=>e.value,set:e=>a("update:value",e)})})});De.render=function(e,a,n,o,r,l){const s=y("a-input-number");return h(),b(s,t({value:e.modelValue,"onUpdate:value":a[1]||(a[1]=t=>e.modelValue=t)},e.formItem.props,X(e.formItem.eventObject)),null,16,["value"])};var Ge=s({name:"schema-form-input",emits:["update:value"],components:{[Z.name]:Z},props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:t,emit:a})=>({modelValue:H({get:()=>e.value,set:e=>a("update:value",e)})})});Ge.render=function(e,a,n,o,r,l){const s=y("a-input");return h(),b(s,t({value:e.modelValue,"onUpdate:value":a[1]||(a[1]=t=>e.modelValue=t)},e.formItem.props,X(e.formItem.eventObject),{autocomplete:"new-password"}),null,16,["value"])};var Ne=s({name:"schema-form-radio",emits:["update:value"],components:{[ee.name]:ee,[ee.Group.name]:ee.Group},props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:t,emit:a})=>({modelValue:H({get:()=>e.value,set:e=>a("update:value",e)})})});Ne.render=function(e,a,n,o,r,l){const s=y("a-radio"),u=y("a-radio-group");return h(),b(u,t({value:e.modelValue,"onUpdate:value":a[1]||(a[1]=t=>e.modelValue=t)},X(e.formItem.eventObject)),{default:W((()=>[(h(!0),b(w,null,j(e.formItem.options,(e=>(h(),b(s,{key:e.value,value:e.value},{default:W((()=>[I(V(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},16,["value"])};var Qe=s({name:"schema-form-select",emits:["update:value"],components:{[c.name]:c,[c.Option.name]:c.Option},props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:t,emit:a})=>({modelValue:H({get:()=>e.value,set:e=>a("update:value",e)})})});Qe.render=function(e,a,n,o,r,l){const s=y("Option"),u=y("a-select");return h(),b(u,t({value:e.modelValue,"onUpdate:value":a[1]||(a[1]=t=>e.modelValue=t)},X(e.formItem.eventObject),e.formItem.props),{default:W((()=>[(h(!0),b(w,null,j(e.formItem.options,(e=>(h(),b(s,{key:e.value,value:e.value},{default:W((()=>[I(V(e.label),1)])),_:2},1032,["value"])))),128))])),_:1},16,["value"])};var Be=s({name:"schema-form-textarea",emits:["update:value"],components:{[Z.TextArea.name]:Z.TextArea},props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:t,emit:a})=>({modelValue:H({get:()=>e.value,set:e=>a("update:value",e)})})});Be.render=function(e,a,n,o,r,l){const s=y("a-switch");return h(),b(s,t({checked:e.modelValue,"onUpdate:checked":a[1]||(a[1]=t=>e.modelValue=t)},X(e.formItem.eventObject),e.formItem.props),null,16,["checked"])};var Je=s({name:"schema-form-textarea",emits:["update:value"],components:{[Z.TextArea.name]:Z.TextArea},props:{formItem:{type:Object,default:()=>({})},value:void 0},setup:(e,{attrs:t,emit:a})=>({modelValue:H({get:()=>e.value,set:e=>a("update:value",e)})})});Je.render=function(e,a,n,o,r,l){const s=y("a-textarea");return h(),b(s,t({value:e.modelValue,"onUpdate:value":a[1]||(a[1]=t=>e.modelValue=t)},X(e.formItem.eventObject),e.formItem.props),null,16,["value"])};var He=s({name:"dynamic-form",components:{schemaFormCheckbox:Me,schemaFormInputNumber:De,schemaFormInput:Ge,schemaFormRadio:Ne,schemaFormSelect:Qe,schemaFormSwitch:Be,schemaFormTextarea:Je,[te.name]:te,[ae.name]:ae,[ae.Item.name]:ae.Item},props:{dynamicValidateForm:{required:!0,type:[Object]},fields:{type:Object,default:()=>({})}},setup(e,t){const a=ne(),r=p(e.dynamicValidateForm.formItem.reduce(((e,t)=>(t.eventObject??(t.eventObject={}),e[t.field]=t.value,e)),{}));e.fields&&Object.assign(r,e.fields),e.dynamicValidateForm.formItem.forEach((async e=>{console.log("~~~~~~~~~~",e.asyncOptions),e?.hasOwnProperty("loading")&&(e.loading=!0),Ke(e.asyncOptions)?e.options=await e.asyncOptions(e,a).finally((()=>e.loading=!1)):Ke(e.asyncValue)&&(r[e.field]=await e.asyncValue(e,a).finally((()=>e.loading=!1)))}));const l=p(e.dynamicValidateForm.formItem.reduce(((e,t)=>(t.rules&&(e[t.field]=t.rules),e)),{})),s=e.dynamicValidateForm.watchCallback??(()=>({}));e.dynamicValidateForm.watchKeys&&K(e.dynamicValidateForm.watchKeys.map((e=>()=>r[e])),((t,a)=>s(t,{dynamicForm:e.dynamicValidateForm,modelRef:r})));const{resetFields:u,validate:i,validateInfos:c}=Te(r,l),m=["input","textarea","select","radio","checkbox","input-number","input-range","switch"];return{formItemLayout:{labelCol:{span:4},wrapperCol:{span:20}},validate:i,isString:qe,getComponent:e=>m.includes(e)?"schema-form-"+e:o(e)||n(e)?oe(e):e,validateInfos:c,modelRef:r}}});const We=x("data-v-3abf4a71"),Xe=We((function(a,n,o,r,l,s){const u=y("a-spin"),i=y("a-form-item"),c=y("a-form");return h(),b(c,a.dynamicValidateForm.formItemLayout||a.formItemLayout,{default:We((()=>[(h(!0),b(w,null,j(a.dynamicValidateForm.formItem.filter((e=>!e.hidden)),((n,o)=>(h(),b(i,t({key:n.field,help:n.help,extra:n.extra},a.validateInfos[n.field],{label:n.label}),{default:We((()=>[e(u,{spinning:n.loading||!1},{default:We((()=>[(h(),b(re(a.getComponent(n.type)),{value:a.modelRef[n.field],"onUpdate:value":e=>a.modelRef[n.field]=e,"form-item":n},null,8,["value","onUpdate:value","form-item"]))])),_:2},1032,["spinning"])])),_:2},1040,["help","extra","label"])))),128))])),_:1},16)}));He.render=Xe,He.__scopeId="data-v-3abf4a71";export{ue as Q,be as a,me as b,he as c,Oe as d,pe as e,ye as f,Ie as g,je as h,xe as i,Fe as j,Ce as k,ke as l,Ve as m,we as n,He as s,ce as u};
